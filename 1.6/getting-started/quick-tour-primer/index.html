<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/mongo-java-driver-reactivestreams/1.6/img/favicon.png">

    <title>Quick Tour Primer</title>

    <link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-java-driver-reactivestreams/1.6/css/java.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="/mongo-java-driver-reactivestreams/1.6/../">
        <img src="/mongo-java-driver-reactivestreams/1.6/img/logo-mongodb-header.png", alt="MongoDB.org" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="http://try.mongodb.org/" data-toggle="tooltip" data-placement="bottom" title="Try MongoDB in the browser">Try it Out</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/mongo-java-driver-reactivestreams/1.6">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/mongo-java-driver-reactivestreams/1.6/../">Reactive Streams Java Driver</a>
          <a class="version pull-right" href="/mongo-java-driver-reactivestreams/1.6">1.6</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
  
  


        
      
    
      
      
        
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            













  




<li class="toctree-l1  current">
  <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/installation-guide/">
        <i class='fa'></i>
        Installation Guide
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l2">
    <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/quick-tour-primer/">
        <i class='fa'></i>
        Quick Tour Primer
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/quick-tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/quick-tour-admin/">
        <i class='fa'></i>
        Admin Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-java-driver-reactivestreams/1.6/reference/">
        <i class='fa fa-book'></i>
        Reference
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-java-driver-reactivestreams/1.6/changelog/">
        <i class='fa fa-cog'></i>
        Changelog
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-java-driver-reactivestreams/1.6/javadoc/">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-java-driver-reactivestreams/tree/master">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-java-driver-reactivestreams/1.6/issues-help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/mongo-java-driver-reactivestreams/blob/master/docs/reference/content/getting-started/quick-tour-primer.md" target="_blank" title="Edit getting-started/quick-tour-primer.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  
  
  <li><a href="/mongo-java-driver-reactivestreams/1.6/getting-started/">Getting Started</a> <i class="fa fa-angle-right"></i></li>
  <li>Quick Tour Primer</li>
</ul>
</div>




<h1 id="quick-tour-primer">Quick Tour Primer</h1>

<p>The aim of this guide is to provide background about the Java driver and its asynchronous API before going onto
looking at how to use the driver and MongoDB.</p>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
<p>See the <a href="/mongo-java-driver-reactivestreams/1.6/getting-started/installation-guide/">installation guide</a>
for instructions on how to install the MongoDB Reactive Streams Java Driver.</p>

</div>
</p>

<h2 id="reactive-streams">Reactive Streams</h2>

<p>This library is an implementation of the <a href="http://www.reactive-streams.org">reactive streams</a> specification and the reactive stream API
consists of the following components:</p>

<ol>
<li>Publisher</li>
<li>Subscriber</li>
<li>Subscription</li>
</ol>

<p>A <code>Publisher</code> is a provider of a potentially unbounded number of sequenced elements, published according to the demand received from it&rsquo;s <code>Subscriber(s)</code>.</p>

<p>In response to a call to <code>Publisher.subscribe(Subscriber)</code> the possible invocation sequences for methods on the <code>Subscriber</code> are given by the following protocol:</p>

<pre><code>onSubscribe onNext* (onError | onComplete)?
</code></pre>

<p>This means that <code>onSubscribe</code> is always signalled, followed by a possibly unbounded number of <code>onNext</code> signals (as requested by <code>Subscriber</code>)
followed by an <code>onError</code> signal if there is a failure, or an <code>onComplete</code> signal when no more elements are availableâ€”all as long as
the <code>Subscription</code> is not cancelled.</p>

<p>For more information about reactive streams go to: <a href="http://www.reactive-streams.org">http://www.reactive-streams.org</a>.</p>

<h2 id="from-async-callbacks-to-subscribers">From Async Callbacks to Subscribers</h2>

<p>The MongoDB Reactive Streams Java Driver is built upon the MongoDB Async driver which is callback driven.
The API mirrors the Async driver API and any methods that cause network IO return a <code>Publisher&lt;T&gt;</code>,
where <code>T</code> is the type of response for the operation.<br />
The exception to that rule is for methods in the async driver that return a <code>Void</code> value in the callback.
In <a href="http://www.reactive-streams.org">reactive streams</a> this is forbidden, so in those circumstances we
return a <a href="/mongo-java-driver-reactivestreams/1.6/javadoc?com/mongodb/reactivestreams/client/Success.html
"><code>Success</code></a> on the operation.</p>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
<p>All <a href="http://www.reactive-streams.org/reactive-streams-1.0.1-javadoc/?org/reactivestreams/Publisher.html"><code>Publishers</code></a> returned
from the API are cold, meaning that no I/O happens until they are subscribed to and the subscription makes a request. So just creating a
<code>Publisher</code> won&rsquo;t cause any network IO. It&rsquo;s not util <code>Subscription.request()</code> is called that the driver executes the operation.</p>

<p>Publishers in this implementation are unicast. Each <a href="http://www.reactive-streams.org/reactive-streams-1.0.1-javadoc/?org/reactivestreams/Subscription.html"><code>Subscription</code></a>
to a <code>Publisher</code> relates to a single MongoDB operation and its <a href="http://www.reactive-streams.org/reactive-streams-1.0.1-javadoc/?org/reactivestreams/Subscriber.html">&lsquo;Subscriber&rsquo;</a><br />
will receive its own specific set of results.</p>

</div>
</p>

<h2 id="subscribers-used-in-the-quick-tour">Subscribers used in the Quick Tour</h2>

<p>For the Quick Tour we have implemented a couple of different Subscribers and although this is an artificial scenario for reactive streams we
do block on the results of one example before starting the next, so as to ensure the state of the database.</p>

<ol>
<li><p>ObservableSubscriber</p>

<p>The base subscriber class is the <a href="https://github.com/mongodb/mongo-java-driver-reactivestreams/blob/master/examples/tour/src/main/tour/SubscriberHelpers.java
"><code>ObservableSubscriber&lt;T&gt;</code></a>, a Subscriber
that stores the results of the <code>Publisher&lt;T&gt;</code>. It also contains an <code>await()</code> method so we can block for results to ensure the state of
the database before going on to the next example.</p></li>

<li><p>OperationSubscriber</p>

<p>An implementation of the <code>ObservableSubscriber</code> that immediately calls <code>Subscription.request</code> when it&rsquo;s subscribed to.</p></li>

<li><p>PrintSubscriber</p>

<p>An implementation of the <code>OperationSubscriber</code> that prints a message <code>Subscriber.onComplete</code>.</p></li>

<li><p>PrintDocumentSubscriber</p>

<p>An implementation of the <code>OperationSubscriber</code> that prints the json version of a <code>Document</code> when <code>Subscriber.onNext(Document document)</code> is called.</p></li>
</ol>

<h2 id="blocking-and-non-blocking-examples">Blocking and non blocking examples</h2>

<p>As our subscribers contain a latch that is only released when the <code>onComplete</code> method of the <code>Subscriber</code> is called, we can use that latch
to block on by calling the <code>await</code> method.  Below are two examples using our auto-requesting <code>PrintDocumentSubscriber</code>.<br />
The first is non-blocking and the second blocks waiting for the <code>Publisher</code> to complete:</p>

<pre><code class="language-java">// Create a publisher
Publisher&lt;Document&gt; publisher = collection.find();

// Non blocking
publisher.subscribe(new PrintDocumentSubscriber());

Subscriber&lt;Document&gt; subscriber = new PrintDocumentSubscriber();
publisher.subscribe(subscriber);
subscriber.await(); // Block for the publisher to complete
</code></pre>

<h2 id="publishers-subscribers-and-subscriptions">Publishers, Subscribers and Subscriptions</h2>

<p>In general <code>Publishers</code>, <code>Subscribers</code> and <code>Subscriptions</code> are a low level API and it&rsquo;s expected that users and libraries will build more
expressive APIs upon them rather than solely use these interfaces.  As a library solely implementing these interfaces, users will benefit
from this growing ecosystem, which is a core design principle of reactive streams.</p>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/mongo-java-driver-reactivestreams/1.6/getting-started/installation-guide/">
      <i class="fa fa-long-arrow-left"> </i> Installation Guide
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/mongo-java-driver-reactivestreams/1.6/getting-started/quick-tour/">
    Quick Tour <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li><a href="#quick-tour-primer">Quick Tour Primer</a>
<ul>
<li><a href="#reactive-streams">Reactive Streams</a></li>
<li><a href="#from-async-callbacks-to-subscribers">From Async Callbacks to Subscribers</a></li>
<li><a href="#subscribers-used-in-the-quick-tour">Subscribers used in the Quick Tour</a></li>
<li><a href="#blocking-and-non-blocking-examples">Blocking and non blocking examples</a></li>
<li><a href="#publishers-subscribers-and-subscriptions">Publishers, Subscribers and Subscriptions</a></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/mongo-java-driver-reactivestreams/1.6",
   VERSION:     "1.6",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/js/jquery.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/lib/bootstrap.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/js/navbar.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/js/scripts.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/mongo-java-driver-reactivestreams/1.6/js/java.js"></script>



<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

